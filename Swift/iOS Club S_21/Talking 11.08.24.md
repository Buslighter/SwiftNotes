weak/unowned
Чтобы было если бы система не заботилась о том, что есть weak?
weak ссылка - это алгоритм, по которому система зачищает объект
#### В каких ситуациях использовать unowned?
Можем использовать, когда ссылаемся на объект, время жизни которого больше, чем наше и мы в этом уверены.
Когда мы хотим указать, что атрибут обязателен и не может быть опциональным.
p.s. unowned(Unsafe) - в низкоуровневых утилитах, где скорость занимает важнейшее состояние
#### Что в стэкэ, что в куче особенности
Облочока от массива попадает в стэк, элементы в куче

#### Особенность структуры
В структуре нельзя сделать замыкание, которые захватывает ее и меняет ее.
Только класс может захватить себя по слабой ссылке.

На момент компиляции определяется не размер, а алгоритм расчета этого размера. Перед созданием стэка должен быть известен сам размер, дженерик перед созданием известен что будет за тип и какой размер.

Class Promotion - небольшие классы с известным размером могут храниться в стэке.

Почему в мапе не пишем self.x , а пишем x+1 - потому что кложура не эскейпинг, она выполняется синхронно, в обычной последовательности стэков на том же потоке, что и была. 

escaping closure - это значит, что функция завершилась, в стэке почищена

#### Как захватывается value type в closure?


Для чего экзистенциальный контейнер?
Он помогает разные размеры сделать одним видом
protocol witness table

В каком момент происходит dealloc потока и на каком потоке?
Для большинства объектов - мгновенно, как только кончились ссылки.
НО часть объектов освобождается через итерацию runloop, например UIImage. На объекты, которые создаются с помощью obj-c методов.
Обычно на том, на котором удалена - на том и деаллоцирована. Исключение - UIView, деаллоцируется только на мейн потоке.
